# CLAUDE Development Setup Guide

This document describes the development setup for the project using TypeScript + React + Vite + Tailwind CSS + shadcn + SCSS.

## Technology Stack

- **TypeScript**: For type-safe JavaScript development
- **React**: Component framework with compile-time optimizations
- **Vite**: Fast build tool with hot module replacement
- **Tailwind CSS**: Utility-first CSS framework
- **shadcn**: Reusable UI components for React
- **SCSS**: CSS preprocessor for enhanced styling capabilities
- **Font Awesome**: Icon library

## Setup Instructions

1. Initialize the react project with TypeScript and Vite
2. Configure Tailwind CSS
3. Install and configure shadcn/react components
4. Set up SCSS support
5. Install Font Awesome for icons
6. Set up development scripts

## Available Scripts

- `pnpm dev` - Start the development server
- `pnpm build` - Build the project for production
- `pnpm preview` - Preview the production build
- `pnpm check` - Check for TypeScript/React errors
- `pnpm check:watch` - Watch for TypeScript/React errors
- `ui:add` - Add shadcn/ui components

## Project Structure

The project is organized into the following components:

- `src/hooks` - React hooks
- `src/components/layouts` - Layout components
- `src/components/sections` - Page sections
- `src/components/ui` - Reusable UI components
- `src/i18n` - Internationalization files (future implementation)

## Internationalization (i18n)

The project is structured to support multiple languages. Translation files can be added to the `src/i18n` directory to support different languages.

## Styling

- Global styles are in `src/App.scss`
- Component-specific styles can be added directly in the component files
- Tailwind CSS utilities are used for rapid styling
- SCSS features like variables, nesting, and mixins are also supported

## Hot Module Replacement

Vite's hot module replacement is configured to exclude the `.claude` directory.

## Documentation Convention

All documentation files generated by Claude should be stored in the `docs/` directory. This includes:

- Configuration guides
- API documentation
- Architecture overviews
- Any other documentation files

When Claude generates documentation files, please ensure they are placed in the `docs/` directory rather than the project root.

## Image Component Convention

When adding images to the project, always use Next.js `Image` component instead of the native HTML `<img>` tag. The `Image` component provides:

- Automatic image optimization
- Built-in lazy loading
- Proper responsive behavior
- Performance improvements

Example usage:

```jsx
import Image from 'next/image';

<Image
  src="/path/to/image.jpg"
  alt="Description of image"
  width={600}
  height={400}
  className="your-css-classes"
/>
```

## Module Data Flow Rules

The application follows a specific pattern for data flow between components and services, particularly for content fetched from Strapi CMS. Here are the established patterns:

### 1. Service Layer Pattern (`src/services/strapi.ts`)

- **Purpose**: Centralized data fetching functions from Strapi CMS
- **Pattern**: Each function follows the format `async function getDataName()`
- **Implementation**: Uses StrapiClient to fetch data with proper error handling
- **Return Format**: Transforms Strapi response to frontend-friendly format
- **Error Handling**: Graceful fallbacks with empty objects/arrays when Strapi is unavailable
- **Example**:

  ```typescript
  export async function getLogo() {
    const client = new StrapiClient();
    try {
      const { data } = await client.findSingle('logo', {populate:{light:true, dark:true}})
      return {light: client.baseURL + data.light.url, dark: client.baseURL + data.dark.url}
    } catch (error) {
      return {}
    }
  }
  ```

### 2. Server Component Pattern (`Footer.tsx`)

- **Purpose**: Fetch data on the server side and pass to client components
- **Pattern**: Component is declared as `async` and calls data fetching functions
- **Implementation**: Imports service functions and awaits data retrieval
- **Data Passing**: Transforms and passes data as props to client view components
- **Example**:

  ```typescript
  const Footer: React.FC = async () => {
    const { dark } = await strapi.getLogo()
    return <FooterView logo_dark={dark} />
  }
  ```

### 3. Client View Component Pattern (`Footer.view.tsx`)

- **Purpose**: Presentational components that receive data as props
- **Pattern**: Marked with `'use client'` directive for client-side rendering
- **Implementation**: Receives transformed data as props from server components
- **Usage**: Renders UI elements using the passed data and other client-side features
- **Example**:

  ```typescript
  interface FooterProps {
    logo_dark?: string;
  }
  const FooterView: React.FC<FooterProps> = ({logo_dark}) => {
    return (
      <Image src={logo_dark || "/logo-dark.png"} alt="Qingling Logo" />
    );
  }
  ```

### 4. Data Transformation and Error Handling

- **Base URL Concatenation**: Service functions append `client.baseURL` to image URLs
- **Population Strategy**: Use populate options in `findSingle` calls for related content
- **Fallback Mechanisms**: Provide default values when Strapi requests fail
- **Type Safety**: Define proper TypeScript interfaces for data structures

### 5. Component Separation Principle

- **Server Components**: Handle data fetching and pass transformed data to client components
- **Client Components**: Focus on UI rendering and client-side interactions
- **Separation of Concerns**: Service layer handles API communication, components handle presentation
